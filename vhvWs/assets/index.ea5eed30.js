var d=Object.defineProperty;var m=(i,e,t)=>e in i?d(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var l=(i,e,t)=>(m(i,typeof e!="symbol"?e+"":e,t),t);import{g as h,f as c,y as n}from"./index.bf382b7a.js";const g="147.95.32.219:8443",u={roomName:"MusiCoLab Demo",width:"100%",height:"100%",configOverwrite:{prejoinPageEnabled:!0}};class f{constructor(){l(this,"api",null);if(this.jitsiContainer=document.getElementById("jitsi-meeting-container"),!this.jitsiContainer)throw new Error("Failed to initialize Jitsi. ParentNode was not found.");this.options={...u,parentNode:this.jitsiContainer},this.setup()}setup(){var s;let e=document.getElementById("start-jitsi-meet-btn"),t=document.getElementById("meet-room-form");document.getElementById("btnCloseCallJoin").addEventListener("click",o=>{e.style.color="green",this.destroy(),this.hide()}),e.addEventListener("click",o=>{e.style.color="red"}),t.addEventListener("submit",o=>{o.preventDefault();let r=new FormData(o.target);console.log(Object.fromEntries(r));let a=r.get("meet-room");a!=null&&(this.options.roomName=a),this.show(),this.initAPI()}),this.jitsiContainer.style.resize="height",this.jitsiContainer.style.minHeight="100px",$("#meet-room")[0].value=(s=h().course)!=null?s:"test-room"}initAPI(){this.api||(this.api=new JitsiMeetExternalAPI(g,this.options),c("collaboration")&&this.api.addListener("videoConferenceJoined",e=>{if(console.log(e),(e==null?void 0:e.displayName.length)>0){let t=n.awareness.getLocalState().user;t&&(n.awareness.setLocalStateField("user",{...t,name:e.displayName}),console.log({awarenessUser:n.awareness.getLocalState()}))}}),this.api.addEventListener("readyToClose",()=>{console.log("Jitsi call has ended. Jitsi iframe will be hidden and the API will be destroyed.");let e=document.getElementById("start-jitsi-meet-btn");e.style.color="green",this.destroy(),this.hide()}))}destroy(){console.log("Destroying Jitsi"),this.api.dispose(),this.api=null}show(){if(!this.jitsiContainer){console.error("Jitsi container element was not found. Check index.html");return}$("#jitsi-meeting-container").slideDown("slow",()=>{}),$("#enter-jitsi-meet-room").modal("hide")}hide(){if(!this.jitsiContainer){console.error("Jitsi container element was not found. Check index.html");return}$("#jitsi-meeting-container").slideUp("slow",()=>{})}}const C=new f;export{C as default};
//# sourceMappingURL=index.ea5eed30.js.map
