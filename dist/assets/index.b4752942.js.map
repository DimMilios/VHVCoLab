{"version":3,"file":"index.b4752942.js","sources":["../../src/js/jitsi/index.js"],"sourcesContent":["import { yProvider } from '../yjs-setup';\n\nclass JitsiAPI {\n  setup() {\n    let parentNode = document.getElementById('jitsi-meeting-container');\n    if (!parentNode) {\n      throw new Error('Failed to initialize Jitsi. ParentNode was not found.');\n    }\n\n    $('#jitsi-meeting-container').resizable({\n      resizeWidth: false,\n    });\n\n    if (!this.api) {\n      this.api = new JitsiMeetExternalAPI('meet.jit.si', {\n        roomName: 'MusiCoLab Demo',\n        width: '100%',\n        height: '100%',\n        parentNode,\n      });\n\n      this.api.addListener('videoConferenceJoined', (localUser) => {\n        console.log(localUser);\n        if (localUser?.displayName.length > 0) {\n          let user = yProvider.awareness.getLocalState().user;\n  \n          if (user) {\n            yProvider.awareness.setLocalStateField('user', {\n              ...user,\n              name: localUser.displayName,\n            });\n            console.log({ awarenessUser: yProvider.awareness.getLocalState() });\n          }\n        }\n      });\n      // window.JitsiAPI = this.api;\n    }\n  }\n\n  destroy() {\n    console.log('Destroying Jitsi');\n    // console.log(this.api.dispose, typeof this.api);\n    this.api.dispose();\n    this.api = null;\n  }\n}\n\nexport default new JitsiAPI();\n\n// export function getJitsiApiInstance() {\n//   if (api === null) {\n//     console.warn(\"JitsiMeetExternalApi isn't initialized yet.\");\n//   }\n//   return api;\n// }\n"],"names":[],"mappings":"kfAEA,OAAe,CACb,OAAQ,CACN,GAAI,GAAa,SAAS,eAAe,2BACzC,GAAI,CAAC,EACH,KAAM,IAAI,OAAM,yDAGlB,EAAE,4BAA4B,UAAU,CACtC,YAAa,KAGV,KAAK,KACR,MAAK,IAAM,GAAI,sBAAqB,cAAe,CACjD,SAAU,iBACV,MAAO,OACP,OAAQ,OACR,eAGF,KAAK,IAAI,YAAY,wBAAyB,AAAC,GAAc,CAE3D,GADA,QAAQ,IAAI,GACR,kBAAW,YAAY,QAAS,EAAG,CACrC,GAAI,GAAO,EAAU,UAAU,gBAAgB,KAE/C,AAAI,GACF,GAAU,UAAU,mBAAmB,OAAQ,OAC1C,GAD0C,CAE7C,KAAM,EAAU,eAElB,QAAQ,IAAI,CAAE,cAAe,EAAU,UAAU,uBAQ3D,SAAU,CACR,QAAQ,IAAI,oBAEZ,KAAK,IAAI,UACT,KAAK,IAAM,MAIf,MAAe,GAAI"}