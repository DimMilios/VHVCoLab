<script src="/scripts/handlebars.min.js"></script>

<div id="menubar" class="w3-card-2 w3-slim topnav" style="position: fixed; top: 25px; z-index: 50;">
  <!-- <div id="menubar" class="w3-navbar w3-card-2 w3-slim topnav" style="position: fixed; top: 25px; z-index: 50;"> -->
  <!-- this menu system requires including bootstrap 4:
    vim: ts=3:nowrap
  -->
  
  <nav id="handlebars-nav" style="z-index:0;" class="navbar navbar-expand-md navbar-dark bg-dark btco-hover-menu">
    <nav style="margin-top:0px; width:100%; padding-top:19px; z-index:0;" id="handlebars-nav" class="navbar navbar-expand-md navbar-dark bg-dark btco-hover-menu">
      <div style="width:100%;" id="menu-div"></div>
      <div style="z-index:0; display: flex; padding-top: 2px; white-space: nowrap !important;" class="nav-icon-group" id="toolbar"></div>
    </nav>
  </nav>
  
  <style>
    <!-- 
  /* 
   * Stylings for top menu in navigation bar
   */
  
  nav.navbar {
    background: transparent !important;
    height: 10px;
  
    padding-top: 10px;
    margin-top: 10px;
  
    padding-bottom: 6px;
    margin-bottom: 10px;
  }
  
  /* #navbarNavDropdown {
    background: transparent !important;
  }
  
  
  #primary-nav a.dropdown-toggle {
    color: #cccccc !important;
    margin-top: 5px;
    padding: 3px 16px;
  } */
  
  .w3-navbar {
    overflow: visible !important;
  }
  
  .w3-navbar li:hover, .w3-navbar li a:hover {
    background: none !important;
    color: white;
  }
  
  .nav>li>a:focus, .nav>li>a:hover {
    background: none !important;
  }
  
  .nav>li>a:hover {
  /*	color: white; */
  }
  
  
  .menu-item {
    width: auto;
    clear: both;
    font-weight: 400;
    line-height: 1.6;
    color: #28292b;
    white-space: nowrap;
    padding: 3px 16px;
    cursor: pointer;
  }
  
  .menu-item:hover {
    color: #aa3355;
  }
  
  span.gh, span.web {
    display: block;
    color: black;
    /* float: right; */
    cursor: pointer;
  }
  
  .shortcut-cell a {
    cursor: help;
  }
  
  span.shortcut {
    display: block;
    font-style: italic;
    color: #aaaaaa;
    cursor: pointer;
  }
  
  span.filter {
    display: block;
    color: limegreen;
    cursor: pointer;
  }
  
  span.shortcut a:hover, span.filter a:hover {
    color: #aa3355;
  }
  
  
  span.gh a, span.web a {
    display: inline;
    padding: 0;
  }
  
  
  span.gh a:hover, span.web a:hover {
    color: #aa3355;
  }
  
  div.menu-heading {
    color: black;
    font-weight: bold;
    white-space: nowrap;
    font-size: 110%;
    padding: 0;
    display: inline;
  }
  
  div.menu-heading a:hover {
    color: #aa3355;
  }
  
  table.menu, table.menu tr {
    width: 100%;
  }
  
  table.menu tr:hover {
    background: #f3f3f3;
  }
  
  ul.dropdown-menu li {
    background: #dbebf0;
  }
  
  table.menu td:first-child {
    width: 100%;
  }
  
  table.menu tr {
    white-space: nowrap;
  }
  
  table.menu a {
    padding: 3px 16px;
  }
  
  table.menu .gh a, table.menu .shortcut a, table.menu .filter a, table.menu .web a {
    padding: 0;
  }
  
  table.menu .shortcut a, table.menu .filter a {
    padding-right: 4px;
  }
  
  td.gh-cell {
    width:100%; 
    padding-right:4px;
  }
  
  /* Code for submenus */
  
  /* .dropdown-submenu {
    position: relative;
  }
  
  .dropdown-submenu a::after {
    transform: rotate(-90deg);
    position: absolute;
    right: 6px;
    top: .8em;
  }
  
  .dropdown-submenu .dropdown-menu {
    top: 0;
    left: 100%;
    margin-left: .1rem;
    margin-right: .1rem;
  }
  
  
  ul.dropdown-menu li {
    width: 100%;
  }
  
  li.nav-item.dropdown > a {
    margin-left: 15px;
  } */
  
  
  /* end of submenu styling */
  
  
  /* a.dropdown-item.dropdown-toggle {
    padding: 3px 16px;
  }
  
  li .dropdown-item.dropdown-toggle:hover {
    color: #aa3355;
    background: green;
  }
  
  
  span.dropdown-toggle {
    padding-left: 10px;
    margin-left: 16px;
  }
  
  span.dropdown-toggle::after {
    display: inline-block;
    margin-left: .255em;
    vertical-align: .255em;
    content: "";
    border: 0;
    width: 0;
    height: 0;
  } */
  
  
  li.contextual {
    display: none;
  }
  
  
  a.menu-link:hover {
    color: #aa3355 !important;
  }
  
  
  table.menu tr:hover a.menu-link {
    color: black;
  }
  
  #language-icon {
    font-size: 150%;
  }
  
  /* .dropdown-menu {
    opacity: 0.96;
  } */
  
  
  
  @media only screen and (max-width: 750px) {
  
    button.navbar-toggler {
      font-size: 70%;
      margin-top: -11px;
      margin-left: 3px;
    }
  
    /* span.menu-name.nav-link.dropdown-toggle, span.menu-item, table.menu td {
      color:      black;
      background: white;
      opacity:    0.95;
    }
  
    span.menu-name.nav-link.dropdown-toggle:hover, span.menu-item:hover {
      color:      #aa3355;
    } */
  }
  
  
  
  </style>
  
  
  
  <style>
    
  /* ====== Bootstrapthemes.co btco-hover-menu ===== */
  
  .navbar-light .navbar-nav .nav-link {
      color: rgb(64, 64, 64);
  }
  
  .btco-hover-menu a ,  .navbar > li > a {
      /* text-transform: capitalize; */
      padding: 3px 16px;
  }
  
  .btco-hover-menu .active a,
  .btco-hover-menu .active a:focus,
  .btco-hover-menu .active a:hover,
  .btco-hover-menu li a:hover,
  .btco-hover-menu li a:focus ,
  .navbar>.show>a,
  .navbar>.show>a:focus,
  .navbar>.show>a:hover{
      /* color: #000; */
      background: transparent;
      outline: 0;
  }
  
  
  
  /*submenu style start from here*/
  
  /* 
  .dropdown-menu {
    padding: 0; 
    margin: 0;
    margin-top: -3px;
  
    border: 1px solid transition !important;
    border: 1px solid rgba(0,0,0,.15);	
    border-radius: 0px;
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
  } */
  
  /*first level*/
  .btco-hover-menu .collapse ul > li:hover > a { 
  /*	background: #f5f5f5; */
  }
  
  .btco-hover-menu .collapse ul ul > li:hover > a,
  .navbar .show .dropdown-menu > li > a:focus,
  .navbar .show .dropdown-menu > li > a:hover {
  /*	background: #fff; */
  }
  
  /*second level*/
  .btco-hover-menu .collapse ul ul ul > li:hover > a {
  /*	background: #fff; */
  }
  
  /*third level*/
  .btco-hover-menu .collapse ul ul, 
  .btco-hover-menu .collapse ul ul.dropdown-menu {
  /*	background:#f5f5f5; */
  }
  
  .btco-hover-menu .collapse ul ul ul,
  .btco-hover-menu .collapse ul ul ul.dropdown-menu {
  /*	background:#f5f5f5 */
  }
  
  .btco-hover-menu .collapse ul ul ul ul, 
  .btco-hover-menu .collapse ul ul ul ul.dropdown-menu {
  /*	background:#f5f5f5 */
  }
  
  /*Drop-down menu work on hover*/
  .btco-hover-menu{
    background: none;
    margin: 0;
    padding: 0;
    min-height:20px
  }
  
  /* @media only screen and (max-width: 750px) {
      .btco-hover-menu .show > .dropdown-toggle::after{
          transform: rotate(-90deg);
      }
  } */
  @media only screen and (min-width: 750px) {
  
      .btco-hover-menu .collapse ul li{position:relative;}
      .btco-hover-menu .collapse ul li:hover> ul{display:block}
      .btco-hover-menu .collapse ul ul{position:absolute;top:100%;left:0;min-width:250px;display:none}
      /*******/
      .btco-hover-menu .collapse ul ul li{position:relative}
      .btco-hover-menu .collapse ul ul li:hover> ul{display:block}
      .btco-hover-menu .collapse ul ul ul{position:absolute;top:0;left:100%;min-width:250px;display:none}
      /*******/
      .btco-hover-menu .collapse ul ul ul li{position:relative}
      .btco-hover-menu .collapse ul ul ul li:hover ul{display:block}
      .btco-hover-menu .collapse ul ul ul ul{position:absolute;top:0;left:-100%;min-width:250px;display:none;z-index:1}
  
  }
  
  </style>
  
  <script>
    
  /*!
   * Bootstrap 4 multi dropdown navbar ( https://bootstrapthemes.co/demo/resource/bootstrap-4-multi-dropdown-navbar/ )
   * Copyright 2017.
   * Licensed under the GPL license
   */
  
  
  // $( document ).ready( function () {
  //     $( '.dropdown-menu a.dropdown-toggle' ).on( 'click', function ( e ) {
  //         var $el = $( this );
  //         var $parent = $( this ).offsetParent( ".dropdown-menu" );
  //         if ( !$( this ).next().hasClass( 'show' ) ) {
  //             $( this ).parents( '.dropdown-menu' ).first().find( '.show' ).removeClass( "show" );
  //         }
  //         var $subMenu = $( this ).next( ".dropdown-menu" );
  //         $subMenu.toggleClass( 'show' );
          
  //         $( this ).parent( "li" ).toggleClass( 'show' );
  
  //         $( this ).parents( 'li.nav-item.dropdown.show' ).on( 'hidden.bs.dropdown', function ( e ) {
  //             $( '.dropdown-menu .show' ).removeClass( "show" );
  //         } );
          
  //          if ( !$parent.parent().hasClass( 'navbar-nav' ) ) {
  //             $el.next().css( { "top": $el[0].offsetTop, "left": $parent.outerWidth() - 4 } );
  //         }
  
  //         return false;
  //     } );
  // } );
  
  </script>
  
  
  <style>
  
  .nav-icon-group {
    white-space: nowrap;
    user-select: none;
  }
  
  .nav-icon
  {
    user-select: none;
    white-space: nowrap;
    margin-right: 2px;
    opacity: 0.6;
    cursor: pointer;
  }
  
  [id^=save-],
  [id^=load-]
  {
    font-size: 65%;
  }
  
  [id^=save-].filled .fa-stack-2x
  {
    color: red;
  }
  
  [id^=load-].filled .fa-stack-2x
  {
    color: limegreen;
  }
  
  
  [id^=save-] .fa-stack-1x,
  [id^=load-] .fa-stack-1x
  {
    color: #01313f;
  
  }
  
  .nav-play-button:hover,
  .nav-icon:hover
  {
    opacity: 0.95 !important;
  }
  
  #toolbar {
    white-space: nobreak;
  }
  
  input#search-pitch, input#search-interval, input#search-rhythm {
    width: 80px;
    font-size: 15px;
    background: #ddd;
    border-radius: 3px;
    border: 0;
  }
  
  input[type="text"]::placeholder {  
    text-align: center; 
  } 
  
  input:focus {
      outline-width: 0;
  }
  
  input#filter {
    width:          270px;
    font-size:      15px;
    background:     #ddd;
    border-radius:  3px;
    border:         0;
  }
  
  input#filter.invalid {
    background: #ffe0e0;
  }
  
  input#scriptid {
    width:          270px;
    background:     #ddd;
    border-radius:  3px;
    border:         0;
    vertical-align:	middle;
    font-size:	15px;
    height:		24px;
  }
  
  .filter-icon.active {
    color: yellow;
    opacity: 0.9;
  }
  
  input:focus {
     outline-width: 0;
  }
  
  table.multipage td {
    padding-left: 2px !important;
    padding-right: 2px !important;
    opacity: 0.8;
  }
  
  table.multipage td div:hover,
  tagle.multipage td:hover
  {
    color: white;
    opacity: 0.95 !important;
  }
  
  
  
  </style>
  
  
  
  
  
  <!-- HANDLEBARS TEMPLATES -------------------------------------- -->
  <!--
    vim: nowrap ts=3 ft=javascript
  -->
  
  <!-- MENU-TEMPLATE ------------------------------------------------------- -->
  
  
  <!-- <script id="template-menu" type="text/x-handlebars-template">
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul style="white-space:nospace; width:100%" class="navbar-nav">
  
        {{#ENTRY}}
          {{{printMainMenuEntry this}}}
        {{/ENTRY}}
  
  single-entry example:
        <li id="nav-3"> <a href="/performers">Performers</a> </li>
  
      </ul>
  </script> -->
  
  
  
  
  
  
  
  <!-- SECOND-LEVEL-MENU-TEMPLATE ------------------------------------------------------- -->
  
  
  <!-- <script id="template-submenu" type="text/x-handlebars-template">
  
  <span class="menu-name nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    {{{languageText TEXT}}}
  </span>
  
  <ul class="dropdown-menu">
  
    {{{printObject "INPUT TO SUBMENU" this}}}
  
  
    {{#if SUBMENU}}
      {{#ifArray SUBMENU.ENTRY}}
        {{#each SUBMENU.ENTRY}}
          {{{printMenuItem this}}}
        {{/each}}
      {{/ifArray}}
    {{/if}}
  </ul>
  
  </script> -->
  
  
  <!-- MENU-ITEM-TEMPLATE ------------------------------------------------------- -->
  
  <!-- 
  <script id="menu-item-template" type="text/x-handlebars-template">
  
    <li>
      <table class="menu">
        <tr>
          <td>
  
  {{{printObject "PRINTING A MENU ITEM" this}}}
            {{#if TEXT}}
              {{#if SUBMENU}}
                <a class=" dropdown-item dropdown-toggle " href="#"
              {{else}}
                <span class="menu-item"
              {{/if}}
              {{#if TEXT.ACTION}} onclick="{{{TEXT.ACTION}}}"
              {{else}}
                {{#if TEXT.LINK }}
                  onclick="MENU.openUrl('{{{languageText TEXT.LINK}}}', 'doc')"
                {{/if}}
              {{/if}}>
              {{{languageText TEXT}}}
              {{#if SUBMENU}}
                </a>
              {{else}}
                </span>
              {{/if}}
            {{/if}}
          </td>
          {{#each RIGHT_TEXT}}
  
            {{#ifEquals TYPE "shortcut"}}
            <td class="shortcut-cell"">
              <span class="shortcut">
                {{#if LINK}}
                  <a target="_blank" href="{{{languageText LINK}}}">
                {{/if}}
                {{{languageText this}}}
                {{#if LINK}}
                  </a>
                {{/if}}
              </span>
            </td>
            {{/ifEquals}}
  
            {{#ifEquals TYPE "link"}}
            <td class="shortcut-cell"">
              <span class="documentation">
                {{#if LINK}}
                  <a target="_blank" class="menu-link" href="{{{languageText LINK}}}">
                {{/if}}
                {{{languageText this}}}
                {{#if LINK}}
                  </a>
                {{/if}}
              </span>
            </td>
            {{/ifEquals}}
  
            {{#ifEquals TYPE "filter"}}
            <td class="shortcut-cell"">
              <span class="filter">
                {{#if LINK}}
                  <a target="_blank" href="{{{languageText LINK}}}">
                {{/if}}
                {{{languageText this}}}
                {{#if LINK}}
                  </a>
                {{/if}}
              </span>
            </td>
            {{/ifEquals}}
  
            {{#ifEquals TYPE "github"}}
              <td class="gh-cell"">
                <span class="gh">
                  {{#if LINK}}
                    <a target="_blank" href="{{{languageText LINK}}}">
                  {{/if}}
                  <i title="Github repository" class="fas fa-cloud"></i>
                  {{#if LINK}}
                    </a>
                  {{/if}}
                </span>
              </td>
            {{/ifEquals}}
  
            {{#ifEquals TYPE "website"}}
              <td class="gh-cell"">
                <span class="web">
                  {{#if LINK}}
                    <a target="_blank" href="{{{languageText LINK}}}">
                  {{/if}}
                  <i title="View reperotry website" class="fas fa-desktop"></i>
                  {{#if LINK}}
                    </a>
                  {{/if}}
                </span>
              </td>
            {{/ifEquals}}
  
          {{/each}}
  
        </tr>
      </table>
  
      {{#SUBMENU}}
        <ul class="dropdown-menu">
          {{{printMenuItem this}}}
        </ul>
      {{/SUBMENU}}
  
    </li>
  
  </script> -->
  
  
  <script>
  //
  // Handlebars helper functions
  //
  
  //////////////////////////////
  //
  // printMainMenuEntry Handlebars helper  -- 
  //
  
  Handlebars.registerHelper("printMainMenuEntry", function(entry) {
    var output = "";
    output += '<li class="nav-item dropdown';
    if (entry.TYPE && entry.TYPE.match(/contextual/)) {
      output += ' contextual';
    }
    output += '">\n';
  
    var tsource = document.querySelector("#template-submenu").textContent;
    var menuTemplate = Handlebars.compile(tsource);
    output += menuTemplate(entry);
  
    output += "</li>\n";
    return new Handlebars.SafeString(output);
  });
  
  
  
  //////////////////////////////
  //
  // printMenuItem Handlebars helper  -- 
  //
  
  Handlebars.registerHelper("printMenuItem", function(entry) {
    var output = "";
    if (entry.ENTRY) {
      if (Array.isArray(entry.ENTRY)) {
        var listing = entry.ENTRY;
        for (var i=0; i<listing.length; i++) {
          output += generateMenuItem(listing[i]);
        }
      } else {
        output = generateMenuItem(entry.ENTRY);
      }
    } else {
      output = generateMenuItem(entry);
    }
    return new Handlebars.SafeString(output);
  });
  
  
  function generateMenuItem(entry) {
    var tsource = document.querySelector("#menu-item-template").textContent;
    var menuTemplate = Handlebars.compile(tsource);
    return menuTemplate(entry);
  }
  
  
  
  
  
  //////////////////////////////
  //
  // languageText Handlebars helper  -- 
  //
  
  Handlebars.registerHelper("languageText", function(text) {
    var output;
    if (typeof text === "string") {
      return new Handlebars.SafeString(text);
    } else if (text && text.DEFAULT) {
      var language = LANGUAGE;
      if (text.FORCE) {
        language = text.FORCE;
      }
      if (!language) {
        language = "DEFAULT";
      }
      var translation = text[language];
      if (!translation) {
        var entry = DICTIONARY[text["DEFAULT"]];
        if (entry) {
          var newtrans = entry[language];
          if (!newtrans) {
            translation = text["DEFAULT"];
          } else {
            translation = newtrans;
          }
        } else {
          translation = text["DEFAULT"];
        }
      }
      return new Handlebars.SafeString(translation);
    }
  
    return new Handlebars.SafeString("ERROR");
  });
  
  
  
  //////////////////////////////
  //
  // ifEquals Handlebars helper --
  //
  
  Handlebars.registerHelper('ifEquals', function(arg1, arg2, options) {
      return (arg1 == arg2) ? options.fn(this) : options.inverse(this);
  });
  
  
  
  //////////////////////////////
  //
  // ifArray Handlebars helper --
  //
  
  Handlebars.registerHelper('ifArray', function(object, options) {
      return (Array.isArray(object)) ? options.fn(this) : options.inverse(this);
  });
  
  
  
  
  //////////////////////////////
  //
  // arrayify Handlebars helper --
  //
  
  Handlebars.registerHelper('arrayify', function(value)  {
    if (Array.isArray(value)) {
      return value;
    } else {
      return [vaule];
    }
  });
  
  
  
  //////////////////////////////
  //
  // printObject
  //
  
  Handlebars.registerHelper('printObject', function(message, object)  {
    return new Handlebars.SafeString("");
    console.log("MESSAGE:", message, "OBJECT:", object);
  });
  
  </script>
  
  
  
  
  
  
  
  </div>